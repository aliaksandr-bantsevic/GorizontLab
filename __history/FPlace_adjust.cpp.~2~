//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "FPlace_adjust.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm_Place_adjust *Form_Place_adjust;
//---------------------------------------------------------------------------
__fastcall TForm_Place_adjust::TForm_Place_adjust(TComponent* Owner)
	: TForm(Owner)
{
        MACRO_FORM_MOVE_TO_THE_CENTER
}
//---------------------------------------------------------------------------

void TForm_Place_adjust::start(TGLPlace* pl)
{
	place = pl;
	this->Memo_mark->Text = L"Место установки группы портов/датчиков";
	this->Edit_name->Text = L"Обьект мониторинга";

	Timer_start->Enabled = true;

	ShowModal();
}
void __fastcall TForm_Place_adjust::Button_okClick(TObject *Sender)
{
	if (GLSystem->add_place(place->name))
	{

	}
	else
	{
		ShowMessage(L"Не удалось добавить место!");
		delete place;
    }

	Close();
}
//---------------------------------------------------------------------------
void __fastcall TForm_Place_adjust::Timer_startTimer(TObject *Sender)
{
	Timer_start->Enabled = false;

	if (place == NULL)
	{
		place = new TGLPlace(this->Edit_name->Text);
	}
	else
	{
		this->Edit_name->Text = place->name;
	}

}
//---------------------------------------------------------------------------
